base and upgraded stay the exact same except that an extra assert is added to a function
